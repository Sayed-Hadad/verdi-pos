{% extends 'base.html' %}
{% block content %}
<div class="card mb-3">
  <div class="card-header d-flex justify-content-between align-items-center">
    <span>فاتورة مورد #{{ invoice.id }}</span>
    <a class="btn btn-outline-primary btn-sm" href="{{ url_for('main.supplier_invoices') }}">عودة</a>
  </div>
  <div class="card-body row g-3">
    <div class="col-md-4"><strong>المورد:</strong> {{ supplier.name if supplier else '-' }}</div>
    <div class="col-md-4"><strong>الإجمالي:</strong> {{ '%.2f'|format(invoice.total) }}</div>
    <div class="col-md-4"><strong>المدفوع:</strong> {{ '%.2f'|format(invoice.paid) }} | <strong>المتبقي:</strong> {{ '%.2f'|format(invoice.remaining) }}</div>
    <div class="col-md-4"><strong>التاريخ:</strong> {{ invoice.created_at.strftime('%Y-%m-%d %H:%M') }}</div>
  </div>
</div>

<div class="card">
  <div class="card-header">الأصناف</div>
  <div class="card-body p-0">
    <table class="table mb-0 align-middle">
      <thead class="table-light"><tr><th>#</th><th>المنتج</th><th>كمية</th><th>التكلفة</th><th>الإجمالي</th></tr></thead>
      <tbody>
        {% for it in items %}
        <tr>
          <td>{{ it.id }}</td>
          <td>{{ it.product_name }}</td>
          <td>{{ it.qty }}</td>
          <td>{{ '%.2f'|format(it.cost) }}</td>
          <td>{{ '%.2f'|format(it.total) }}</td>
        </tr>
        {% else %}
        <tr><td colspan="5" class="text-center p-3">لا توجد أصناف</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
