{% extends 'base.html' %}
{% block content %}
<div class="card mb-4">
  <div class="card-header">إضافة عميل</div>
  <div class="card-body">
    <form method="post" class="row g-3">
      <div class="col-md-5">
        <label class="form-label">الاسم</label>
        <input name="name" class="form-control" required>
      </div>
      <div class="col-md-5">
        <label class="form-label">الهاتف</label>
        <input name="phone" class="form-control">
      </div>
      <div class="col-md-2 d-flex align-items-end">
        <button class="btn btn-primary w-100">حفظ</button>
      </div>
    </form>
  </div>
</div>

<div class="card">
  <div class="card-header d-flex justify-content-between align-items-center">
    <span>العملاء</span>
    <a class="btn btn-sm btn-outline-success" href="{{ url_for('main.customers_export') }}">⬇️ تصدير Excel</a>
  </div>
  <div class="card-body p-0">
    <table class="table mb-0">
      <thead><tr><th>#</th><th>الاسم</th><th>الهاتف</th><th>إجمالي المشتريات</th></tr></thead>
      <tbody>
        {% for c in customers %}
        <tr><td>{{ c.id }}</td><td>{{ c.name }}</td><td>{{ c.phone or '-' }}</td><td>{{ '%.2f'|format(c.total_purchases or 0) }}</td></tr>
        {% else %}
        <tr><td colspan="4" class="text-center p-3">لا عملاء</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
